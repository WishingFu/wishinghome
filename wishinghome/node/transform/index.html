<!DOCTYPE html>
<html>
<head>
	<title>Effect</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">
	<script type="text/javascript" src="../publics/canvas-extends.js"></script>
	<link rel="shortcut icon" href="/favicon.ico" />
</head>
<body style="overflow: hidden;padding; 0;margin:0;">
	<div class="container">
		<div id="page_1" class="page">
			<canvas id="transform" style="background-color: black; z-index: 2;"></canvas>
			<canvas id="bg" style="background-color: black; z-index: 3;
					background-color: transparent;cursor: crosshair;position: absolute;left: 0;top:0;"></canvas>
			<canvas id="cg" style="background-color: black; z-index: 1;
					background-color: transparent; position: absolute;left: 0;top:0;"></canvas>
		</div>
	</div>
	<script type="text/javascript">
		"use strict"
		var transform = document.querySelector("#transform");
		var bg = document.querySelector("#bg");
		var cg = document.querySelector("#cg");
		transform.height = window.innerHeight;
		cg.height = window.innerHeight;
		bg.height = window.innerHeight;
		transform.width = window.innerWidth;
		cg.width = window.innerWidth;
		bg.width = window.innerWidth;
		var tc = transform.getContext("2d");
		var bc = bg.getContext("2d");
		var cc = cg.getContext("2d");
	
		tc.fillStyle = "white";
		bc.fillStyle = "white";
		cc.strokeStyle = "rgba(255,255,255,0.1)";
		cc.fillStyle= "white";
		tc.shadowColor = "white";
		cc.shadowColor = "white";
		bc.shadowColor = "#B3F607";
		tc.shadowBlur = "5";
		cc.shadowBlur = "2";
		bc.shadowBlur = "5";
		tc.strokeStyle = "white";
		bc.strokeStyle = "#B3F607";
		tc.lineWidth= "1";
		bc.lineWidth= "2";
		var sc = 1;
		var stars = [];
		var pan = [];
		var pany = []
		var pointNumber = 1000;
		var mnp = new Point();
		var circles = [];
	
		// bg.onmousemove = function(e) {
			
		// }

		// bg.onclick = function(e) {
		// 	mnp = getNearestPoint(e.offsetX, e.offsetY);
		// 	cc.beginPath();
		// 	cc.moveTo(mnp.x, mnp.y);
		// 	cc.arc(mnp.x, mnp.y, 10, 0, Math.PI * 2, false);
		// 	cc.closePath();
		// 	cc.fill();
		// }

		for(var i = pointNumber; i--;) {
			var x = Math.random() * transform.width;
			var y = Math.random() * transform.height;
			var r = Math.random() * 2;
			stars.push(new Point(x, y, r));
		}
		for(var i = 0; i - 10; i++) {
			var panx = [];
			var panyy = [];
			for (var j = 0; j - 10; j++) {
				var p = new Point(300 + j * 60, 100 + i * 60, 2);
				var py = new Point(300 + i * 60, 100 + j * 60, 2);
				panx.push(p);
				panyy.push(py);
			}
			pan.push(panx);
			pany.push(panyy);
		}
		for(var i = 0; i - 50; i ++) {
			for(var j = 0; j - 20; j++) {
				var x = 200 + i * 30;
				var y = 200 + j * 30;
				circles.push(new Point(x, y));
			}
		}
		analysisLines(stars, cc, pointNumber * 16.7 * 10);
		analysisPoints(stars, bc, pointNumber * 16.7 * 10);
		for(var i in pany) {
			pany[i] = pany[i].reverse();
		}
		// analysisLinesGroup(pan, cc, 400 * 16.7);
		// analysisPointsGroup(pan, bc, 400 * 16.7);
		// analysisPointsGroup(pany, bc, 400 * 16.7);
		// analysisLinesGroup(pany, cc, 400 * 16.7);
			// analysisPolygon(new Point(800,300), 6, 200, true, Math.PI / 6, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 200, true, Math.PI / 6, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 200, true, Math.PI + Math.PI / 6, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 113, true, 0, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 113, true, Math.PI, bc, 1);
			// analysisPolygon(new Point(800,300), 6, 173, true, 0, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 173, true, 0, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 173, true, Math.PI, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 100, true, Math.PI / 6, bc, 1);
			// analysisPolygon(new Point(800,300), 3, 100, true, Math.PI + Math.PI / 6, bc, 1);
			// analysisCircle(new Point(800,300), 200, false, bc, 1, true);
			// analysisCircle(new Point(800,300), 240, true, bc, 1, true);
		// var ci = 0;
		// var cInter = setInterval(function(){
		// 	// bc.strokeStyle = "rgba("+ Math.round(Math.random() * 255) +","+Math.round(Math.random() * 255)+","+Math.round(Math.random() * 255)+",1)";
		// 	analysisCircle(circles[ci], 40 ,false, bc, 600, true);
		// 	ci++;
		// }, 50);

		function getNearestPoint(x, y) {
			var d = 999999;
			var np;
			for(var i in pan) {
				for(var j in pan[i]) {
					var pd = Math.abs(pan[i][j].x - x) + Math.abs(pan[i][j].y - y);
					if(pd < d) {
						d = pd; np = pan[i][j];
					}
				}
			}
			return np;
		}
	</script>
</body>
</html>